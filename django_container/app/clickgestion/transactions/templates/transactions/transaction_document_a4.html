{% load i18n humanize static %}
    <div class="row justify-content-center">
    <div id="transaction-document-a4" class="border p-5" style="width: 210mm; min-height: 297mm;">
    <div class="container-fluid">

        <!--Header-->
        <div class="row">
            <div class="col p-0">
                <img src="{% static 'core/img/clickbenidormlogo1.png' %}">
            </div>
            <div class="row justify-content-end">
                <div class="col text-right">
                    <h3><strong>{{ transaction.title }}</strong></h3>
                </div>
            </div>
        </div>
        <p></p>

        <!--First Data Row-->
        <div class="row my-4">

            <!--Left-->
            <div class="col">
                <div class="row">
                    <strong>
                        {{ transaction.client|default_if_none:"&nbsp;" }}
                    </strong>
                </div>
                <div class="row">
                    {{ transaction.client_email|default_if_none:"&nbsp;" }}
                </div>
                <div class="row">
                    {{ transaction.client_phone_number|default_if_none:"&nbsp;" }}
                </div>
                <div class="row">
                    {{ transaction.client_address|default_if_none:"&nbsp;"|linebreaks}}
                </div>
                <div class="row">
                </div>
            </div>

            <!--Right-->
            <div class="row justify-content-end">
                <div class="col text-right">
                    <h6><strong>{{ transaction.code }}</strong></h6>
                    <h6>{{ transaction.closed_date }}</h6>
                    <h6>{{ transaction.employee.get_full_name }}</h6>
                </div>
            </div>
        </div>

        <p></p>

        <!--Concept Table-->
        <div class="row my-4">
        <table class="table table-bordered">
            <thead class="thead-light">
            <tr>
                <th colspan="3">{% trans 'Concepts' %}</th>
                <th>{% trans 'Taxable' %}</th>
                <th>{% trans 'Rate' %}</th>
                <th>{% trans 'Tax' %}</th>
                <th>{% trans 'Total' %}</th>
            </tr>
            </thead>
            <tbody>
            {% for concept in transaction.concepts.all %}
            <tr>
                <td colspan="3">{{ concept.description_short }}</td>
                <td>{{ concept.taxable_amount|floatformat:2|intcomma }}</td>
                <td>{{ concept.settings.vat_percent }}%</td>
                <td>{{ concept.tax_amount|floatformat:2|intcomma }}</td>
                <td>
                    {% with concept.value as value %}
                    {% include 'concepts/value_md.html' %}
                    {% endwith %}
                </td>
            </tr>
            {% endfor %}
            <thead class="thead-light">
            <tr>
                <th colspan="7">{% trans 'Totals' %}</th>
            </tr>
            </thead>
            {% for value in transaction.totals %}
            <tr>
                <td colspan="3"></td>
                <td colspan="2">{% trans 'Total' %} {{ value.currency.name }}</td>
                <td colspan="2" class="text-right">
                    {% include 'concepts/value_bold_md.html' %}
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        </div>

        <!--Signatures-->
        <div class="row justify-content-end">

            <!--Employee Signature-->
            {% if transaction.employee_signature_required %}
            <div class="col text-right">
                <h6>{% trans 'Employee Signature' %}</h6>
                <div class="border m-2" style="width: 80mm; height: 30mm;"> </div>
                <h6><strong>{{ transaction.employee.get_full_name }}</strong></h6>
            </div>
            {% endif %}

            <!--Client Signature-->
            {% if transaction.client_signature_required %}
            <div class="col text-right">
                <h6>{% trans 'Client Signature' %}</h6>
                <div class="border m-2" style="width: 80mm; height: 30mm;"> </div>
                <h6><strong>{{ transaction.client|default_if_none:"{% trans 'Client Signature' %}" }}</strong></h6>
            </div>
            {% endif %}


        </div>

        <!--Thank you-->
        <div class="row justify-content-center my-5">
            <h5>{% trans 'Thank You' %}</h5>
        </div>
    </div>
    </div>
</div>
